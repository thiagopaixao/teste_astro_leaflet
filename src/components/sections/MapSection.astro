---
const { latitude, longitude, zoom } = Astro.props;
---
<section class="h-screen">
  <div id="map" class="w-full h-full"></div>
</section>

<script define:vars={{ latitude, longitude, zoom }}>
  import L from 'leaflet';
  import '@geoman-io/leaflet-geoman-free';

  document.addEventListener('DOMContentLoaded', () => {
    const map = L.map('map').setView([latitude, longitude], zoom);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    // Integrate Geoman
    map.pm.addControls({
      position: 'topleft',
      drawCircle: false,
    });
  });
</script>
